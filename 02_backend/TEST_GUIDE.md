# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¬ã‚¤ãƒ‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€pytestã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œæ–¹æ³•ã¨çµæœã®è¦‹æ–¹ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

## ğŸ“‹ ãƒ†ã‚¹ãƒˆçµæœã®è¦‹æ–¹

### ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
- **PASSED** âœ… - ãƒ†ã‚¹ãƒˆæˆåŠŸ
- **FAILED** âŒ - ãƒ†ã‚¹ãƒˆå¤±æ•—
- **SKIPPED** â­ï¸ - ãƒ†ã‚¹ãƒˆã‚¹ã‚­ãƒƒãƒ—
- **ERROR** ğŸ’¥ - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼

### è¡¨ç¤ºå½¢å¼ã®è§£èª¬
```
tests/test_example.py::TestClass::test_method PASSED [ 50%]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”‚                â”‚         â”‚              â”‚        â”‚
â”‚   ãƒ•ã‚¡ã‚¤ãƒ«å    â”‚ ã‚¯ãƒ©ã‚¹å â”‚  ãƒ†ã‚¹ãƒˆå     â”‚ çµæœ   â”‚  é€²æ—ç‡
```

### ã‚µãƒãƒªãƒ¼è¡¨ç¤º
```
============================== 8 passed in 0.08s ===============================
                               â”‚        â”‚      â”‚
                            æˆåŠŸæ•°    å¤±æ•—æ•°  å®Ÿè¡Œæ™‚é–“
```

---

## ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

### åŸºæœ¬å®Ÿè¡Œ
```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ
pytest tests/test_init_db.py

# è©³ç´°è¡¨ç¤ºï¼ˆ-v: verboseï¼‰
pytest tests/test_init_db.py -v

# çµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
pytest tests/test_init_db.py -v > tests/test_results/test_results_init_db.txt 2>&1
```

### ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãå®Ÿè¡Œ
```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
pytest --cov=app tests/

# HTMLãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
pytest --cov=app --cov-report=html tests/
open htmlcov/index.html
```

### ãã®ä»–ä¾¿åˆ©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³
```bash
# å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®ã¿å†å®Ÿè¡Œ
pytest --lf

# æœ€åˆã®å¤±æ•—ã§åœæ­¢
pytest -x

# å¤±æ•—æ™‚ã®è©³ç´°è¡¨ç¤º
pytest --tb=short  # ã¾ãŸã¯ --tb=long

# æ¨™æº–å‡ºåŠ›ã‚’è¡¨ç¤º
pytest -s

# ä¸¦åˆ—å®Ÿè¡Œï¼ˆpytest-xdistå¿…è¦ï¼‰
pytest -n auto
```

---

## ğŸ“ ãƒ†ã‚¹ãƒˆçµæœã®ä¿å­˜å ´æ‰€

```
backend/
â”œâ”€â”€ tests/                    # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ test_init_db.py
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ test_results/        # ãƒ†ã‚¹ãƒˆçµæœï¼ˆç”Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
â”‚       â”œâ”€â”€ test_results_init_db.txt
â”‚       â”œâ”€â”€ test_results_kaggle_client.txt
â”‚       â””â”€â”€ ...
â””â”€â”€ .pytest_cache/           # pytestã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆè‡ªå‹•ç”Ÿæˆã€Gité™¤å¤–ï¼‰
```

---

## ğŸ“ ãƒ†ã‚¹ãƒˆçµæœã®è¨˜éŒ²ãƒ«ãƒ¼ãƒ«

### 1. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€å¿…ãšçµæœã‚’ä¿å­˜

```bash
# TDD Red ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆå¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèªï¼‰
pytest tests/test_xxx.py -v > tests/test_results/test_results_xxx_red.txt 2>&1

# TDD Green ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèªï¼‰
pytest tests/test_xxx.py -v > tests/test_results/test_results_xxx.txt 2>&1
```

### 2. ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

- **é€šå¸¸**: `test_results_[æ©Ÿèƒ½å].txt`
- **Red**: `test_results_[æ©Ÿèƒ½å]_red.txt`ï¼ˆå¤±æ•—æ™‚ã®ã¿ï¼‰
- **æ—¥æ™‚ä»˜ã**: `test_results_[æ©Ÿèƒ½å]_YYYYMMDD.txt`ï¼ˆå±¥æ­´ç®¡ç†æ™‚ï¼‰

### 3. Gitç®¡ç†

- `tests/test_results/*.txt` ã¯**Gitã§ç®¡ç†ã™ã‚‹**ï¼ˆè¨¼è·¡ã¨ã—ã¦é‡è¦ï¼‰
- `tests/.pytest_cache/` ã¯**Gité™¤å¤–**ï¼ˆè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ãŸã‚ï¼‰

---

## ğŸ¯ ãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ãƒ†ã‚¹ãƒˆé–¢æ•°ã®å‘½å
```python
def test_[æ©Ÿèƒ½]_[æ¡ä»¶]_[æœŸå¾…çµæœ]():
    """å…·ä½“çš„ãªèª¬æ˜"""
    # Arrangeï¼ˆæº–å‚™ï¼‰
    # Actï¼ˆå®Ÿè¡Œï¼‰
    # Assertï¼ˆæ¤œè¨¼ï¼‰
```

ä¾‹ï¼š
```python
def test_add_two_positive_numbers_returns_sum():
    """2ã¤ã®æ­£ã®æ•°ã‚’åŠ ç®—ã™ã‚‹ã¨åˆè¨ˆãŒè¿”ã•ã‚Œã‚‹"""
    # Arrange
    a, b = 2, 3

    # Act
    result = add(a, b)

    # Assert
    assert result == 5
```

### ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã®æ§‹æˆ
```python
class TestFeatureName:
    """æ©Ÿèƒ½åã®ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹"""

    def test_normal_case(self):
        """æ­£å¸¸ç³»ã®ãƒ†ã‚¹ãƒˆ"""
        pass

    def test_edge_case(self):
        """å¢ƒç•Œå€¤ã®ãƒ†ã‚¹ãƒˆ"""
        pass

    def test_error_case(self):
        """ç•°å¸¸ç³»ã®ãƒ†ã‚¹ãƒˆ"""
        pass
```

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ†ã‚¹ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„
```bash
# ãƒ†ã‚¹ãƒˆæ¤œå‡ºã®ç¢ºèª
pytest --collect-only

# åŸå› ï¼š
# - ãƒ•ã‚¡ã‚¤ãƒ«åãŒ test_*.py ã¾ãŸã¯ *_test.py ã§ãªã„
# - é–¢æ•°åãŒ test_* ã§å§‹ã¾ã£ã¦ã„ãªã„
# - __init__.py ãŒä¸è¶³ã—ã¦ã„ã‚‹
```

### ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼
```bash
# PYTHONPATHã®ç¢ºèª
echo $PYTHONPATH

# ä¿®æ­£ï¼š
export PYTHONPATH="${PYTHONPATH}:$(pwd)"
```

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„
```bash
# ä»®æƒ³ç’°å¢ƒã®ç¢ºèª
which python
which pytest

# ä»®æƒ³ç’°å¢ƒã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆ
source .venv/bin/activate
```

---

## ğŸ“Š ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç›®æ¨™

| å¯¾è±¡ | ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ |
|------|---------------|
| ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ | 100% |
| APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | 90%ä»¥ä¸Š |
| ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ | 80%ä»¥ä¸Š |
| å…¨ä½“ | 80%ä»¥ä¸Š |

---

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

- [pytestå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.pytest.org/)
- [pytest fixtures](https://docs.pytest.org/en/stable/fixture.html)
- [pytest parametrize](https://docs.pytest.org/en/stable/parametrize.html)

---

**æœ€çµ‚æ›´æ–°**: 2025-11-15
